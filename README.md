# Wasserstein k-means++ for Cloud Regime Histogram Clustering
This repository contains the supporting code for the paper:

Staib, Matthew and Jegelka, Stefanie. Wasserstein k-means++ for Cloud Regime Histogram Clustering. In _Proceedings of the Seventh International Workshop on Climate Informatics_, 2017.

```
@inproceedings{staib2017wasserstein,
 author = {Staib, Matthew and Jegelka, Stefanie},
 title = {Wasserstein k-means++ for Cloud Regime Histogram Clustering},
 booktitle = {Proceedings of the Seventh International Workshop on Climate
Informatics: CI 2017},
 year = {2017}
}
```

## Dependencies
* [TFOCS](https://github.com/cvxr/TFOCS)
* [Gurobi](https://www.gurobi.com/) (for the Wasserstein gradient oracle)
* [MOSEK](https://www.mosek.com/) (for an alternative Wasserstein gradient oracle)
* [FastEMD](http://www.ariel.ac.il/sites/ofirpele/FastEMD/code/) (for an alternative Wasserstein gradient oracle)
* [sinkhornTransport.m from Marco Cuturi](http://marcocuturi.net/SI.html) (for an alternative Wasserstein gradient oracle)
* ICCSP D1 dataset

## Getting started
1. First parse the ICCSP dataset by navigating to the directory with all the .hdf files, then running `extract_cloud_histograms`
2. Add the `compute-optimal-transport` directory to the path, as well as any other third party code (e.g. TFOCS)
3. Run `cluster_histograms` which will load the preprocessed ICCSP data and run various clustering algorithms. (be sure to modify the first few lines of `cluster_histograms` to load the `.mat` file from step 1, wherever it was stored)

At this point, the figures from the paper can be generated by running
* `weather_state_plots`
* `prepare_globe_plots` followed by `make_globe_plots`
